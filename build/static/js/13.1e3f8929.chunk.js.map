{"version":3,"sources":["agent.js","config/config.js","views/Transactions/AllTransactions.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","ROOT_URL","config","ES_URL","APIKEY","responseBody","res","body","requests","url","get","then","requestES","ES","getAllDocs","Sawtooth","getBlock","id","getBlocks","limit","getAllBlocks","getAllBlocksReal","a","allBlocks","previous_block_id","data","length","header","genesis_block_id","blocks","concat","getTransaction","getTransactions","getAllTransactions","getAllTransactionsReal","transactions","element","batches","batch","getPeers","requestApp","set","AppInfo","getInfo","process","REACT_APP_NODE_ENV","module","exports","SAWTOOTH_NODE","devMode","websocket_url","TransactionRow","props","transaction","txLink","header_signature","key","toString","scope","to","substring","family_name","family_version","signer_public_key","payload","Transactions","state","this","agent","setState","transactionsData","className","responsive","hover","map","index","style","textAlign","sm","md","size","offset","color","width","height","Component"],"mappings":"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","file":"static/js/13.1e3f8929.chunk.js","sourcesContent":["import superagentPromise from \"superagent-promise\";\r\nimport _superagent from \"superagent\";\r\nimport config from \"./config/config\";\r\nimport { element } from \"prop-types\";\r\nconst superagent = superagentPromise(_superagent, global.Promise);\r\n\r\nconst ROOT_URL = config.ROOT_URL;\r\nconst ES_URL = config.ES_URL;\r\nconst APIKEY = config.APIKEY;\r\n\r\n\r\nconst responseBody = res => {\r\n  return res.body;\r\n};\r\n\r\nconst requests = {\r\n  del: url => superagent.del(`${ROOT_URL}${url}`).then(responseBody),\r\n  get: url => superagent.get(`${ROOT_URL}${url}`).then(responseBody),\r\n  put: (url, body) =>\r\n    superagent.put(`${ROOT_URL}${url}`, body).then(responseBody),\r\n  post: (url, body) =>\r\n    superagent\r\n      .post(`${ROOT_URL}${url}`, body)\r\n      .set(\"authorization\", sessionStorage.getItem(\"authorization\"))\r\n      .then(responseBody)\r\n};\r\n\r\n\r\n// const requestsIP = {\r\n//   get: url => superagent.get(`${url}`).then(responseBody),\r\n// };\r\n\r\nconst requestES = {\r\n  get: url => superagent.get(`${ES_URL}${url}`).then(responseBody)\r\n\r\n};\r\nconst ES = {\r\n  getAllDocs: () => requestES.get(\"/_stats\"),\r\n}\r\n\r\nconst Sawtooth = {\r\n  getBlock: id => requests.get(\"/blocks/\" + id),\r\n  getBlocks: limit => requests.get(\"/blocks?limit=\" + limit),\r\n  getAllBlocks: limit => requests.get(\"/blocks\"),\r\n  getAllBlocksReal: async (limit) => {\r\n    let allBlocks = await requests.get(\"/blocks\")\r\n    let previous_block_id = allBlocks.data[allBlocks.data.length - 1].header.previous_block_id\r\n    let genesis_block_id = \"0000000000000000\"\r\n\r\n    while (previous_block_id != genesis_block_id) {\r\n      let blocks = await requests.get(\"/blocks?head=\" + previous_block_id)\r\n      \r\n      allBlocks.data = allBlocks.data.concat(blocks.data)\r\n      previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    }\r\n   \r\n    return allBlocks\r\n  },\r\n\r\n  getTransaction: id => requests.get(\"/transactions/\" + id),\r\n  getTransactions: limit => requests.get(\"/transactions?limit=\" + limit),\r\n  getAllTransactions: limit => requests.get(\"/transactions\"),\r\n  getAllTransactionsReal: async (limit) => {\r\n\r\n    let transactions = {}\r\n    transactions.data = []\r\n\r\n    let blocks = await requests.get(\"/blocks\")\r\n    for (let element of blocks.data) {\r\n      let batches = element['batches']\r\n      for (let batch of batches) {\r\n        transactions.data = transactions.data.concat(batch.transactions)\r\n      }\r\n    }\r\n    \r\n    let previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    let genesis_block_id = \"0000000000000000\"\r\n    while (previous_block_id != genesis_block_id) {\r\n      let blocks = await requests.get(\"/blocks?head=\" + previous_block_id)\r\n      for (let element of blocks.data) {\r\n        let batches = element['batches']\r\n        for (let batch of batches) {\r\n          transactions.data = transactions.data.concat(batch.transactions)\r\n        }\r\n      }\r\n      previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    }\r\n   \r\n    return transactions\r\n  },\r\n\r\n  getPeers: limit => requests.get(\"/peers\")\r\n};\r\n\r\nconst requestApp = {\r\n  get: url => superagent\r\n    .get(url)\r\n    .set(\"Authorization\", APIKEY)\r\n    .then(responseBody)\r\n}\r\n\r\nconst AppInfo = {\r\n  getInfo: url => requestApp.get(\"https://v-chain.vn/appservice/v1/apps\")\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  Sawtooth,\r\n  ES,\r\n  AppInfo\r\n};\r\n","if (process.env.REACT_APP_NODE_ENV === \"production\") {\r\n  module.exports = {\r\n    ROOT_URL: \"http://localhost:2398/http://localhost:8008\",\r\n    SAWTOOTH_NODE: \"localhost:4004\",\r\n    ES_URL: \"localhost:9200\",\r\n    devMode: true,\r\n    websocket_url: \"ws:localhost:8008/subscriptions\",\r\n  };\r\n} else {\r\n  module.exports = {\r\n    ROOT_URL: \"http://localhost:2398/http://localhost:8008\",\r\n    devMode: false,\r\n    websocket_url: \"ws:localhost:8008/subscriptions\",\r\n    ES_URL: \"http://localhost:9200\",\r\n    APIKEY:\r\n      \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6ImRpbnRlIiwiZW1haWwiOiJkaW50ZUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImFjdGl2ZSI6dHJ1ZSwiYmFsYW5jZSI6MCwicmVmZXJyYWxfY29kZSI6bnVsbCwicGxhbiI6eyJwbGFuX3R5cGUiOiJwcm8iLCJkdWVfZGF0ZSI6MH0sIm5hbWUiOiJkaW50ZSIsInBob25lIjoiMDEyMzQ1Njc4OSIsImJpcnRoZGF5IjoiMDEvMDEvMTk3MCIsInVzZXJfaWQiOiI1ZjY4N2YwYjAzZTcyOWE0OWRhYjE5NTciLCJleHAiOjE2MzQ2MzUyNTZ9.68eFaiIGZJ3eBt9UvI7mn0is9jtjwJ4kXyvJL5qsJxQ\",\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Table, Row, Col, Spinner, CardBody, CardHeader } from \"reactstrap\";\r\nimport agent from \"../../agent\";\r\n\r\nfunction TransactionRow(props) {\r\n  const transaction = props.transaction;\r\n  const txLink = `/transactions/${transaction.header_signature}`;\r\n\r\n  return (\r\n    <tr key={transaction.header_signature.toString()}>\r\n      <th scope=\"row\">\r\n        <Link to={txLink}>\r\n          {transaction.header_signature.substring(0, 15)}...\r\n        </Link>\r\n      </th>\r\n      <td>\r\n        <Link to={txLink}>{transaction.header.family_name}</Link>\r\n      </td>\r\n      <td>{transaction.header.family_version}</td>\r\n      <td>{transaction.header.signer_public_key.substring(0, 15)}...</td>\r\n      <td>{transaction.payload.substring(0, 75)}...</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\n\r\n\r\nclass Transactions extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      transactions: null,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getAllTransactions();\r\n  }\r\n  async getAllTransactions() {\r\n    let transactions = await agent.Sawtooth.getAllTransactionsReal();\r\n    this.setState({\r\n      transactions: transactions.data\r\n    });\r\n  }\r\n  render() {\r\n    let transactionsData = this.state.transactions;\r\n    if (!transactionsData) {\r\n      return (\r\n        <Row style={{ textAlign: \"center\" }}>\r\n          <Col sm=\"12\" md={{ size: 6, offset: 3 }}>\r\n            <Spinner\r\n              color=\"primary\"\r\n              style={{ width: \"50px\", height: \"50px\" }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Card>\r\n          <CardHeader>\r\n            All Transactions\r\n          </CardHeader>\r\n          <CardBody>\r\n            <Table responsive hover>\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">ID</th>\r\n                  <th scope=\"col\">App</th>\r\n                  <th scope=\"col\">App version</th>\r\n                  <th scope=\"col\">Signer Public Key</th>\r\n                  <th scope=\"col\">Payload</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {transactionsData.map((transaction, index) => (\r\n                  <TransactionRow key={index} transaction={transaction} />\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          </CardBody>\r\n        </Card> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Transactions;\r\n"],"sourceRoot":""}