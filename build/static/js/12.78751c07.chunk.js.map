{"version":3,"sources":["agent.js","config/config.js","views/Blocks/Block.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","ROOT_URL","config","ES_URL","APIKEY","responseBody","res","body","requests","url","get","then","requestES","ES","getAllDocs","Sawtooth","getBlock","id","getBlocks","limit","getAllBlocks","getAllBlocksReal","a","allBlocks","previous_block_id","data","length","header","genesis_block_id","blocks","concat","getTransaction","getTransactions","getAllTransactions","getAllTransactionsReal","transactions","element","batches","batch","getPeers","requestApp","set","AppInfo","getInfo","process","REACT_APP_NODE_ENV","module","exports","SAWTOOTH_NODE","devMode","websocket_url","Block","props","state","block","this","agent","match","params","setState","className","style","lg","block_num","responsive","striped","hover","key","header_signature","signer_public_key","consensus","transaction_ids","map","transaction_id","to","textAlign","sm","md","size","offset","color","width","height","Component"],"mappings":"4OAIMA,EAAaC,IAAkBC,IAAaC,EAAOC,SAEnDC,EAAWC,IAAOD,SAClBE,EAASD,IAAOC,OAChBC,EAASF,IAAOE,OAGhBC,EAAe,SAAAC,GACnB,OAAOA,EAAIC,MAGPC,EAEC,SAAAC,GAAG,OAAIb,EAAWc,IAAX,UAAkBT,GAAlB,OAA6BQ,IAAOE,KAAKN,IAejDO,EACC,SAAAH,GAAG,OAAIb,EAAWc,IAAX,UAAkBP,GAAlB,OAA2BM,IAAOE,KAAKN,IAG/CQ,EAAK,CACTC,WAAY,kBAAMF,EAAc,aAG5BG,EAAW,CACfC,SAAU,SAAAC,GAAE,OAAIT,EAAa,WAAaS,IAC1CC,UAAW,SAAAC,GAAK,OAAIX,EAAa,iBAAmBW,IACpDC,aAAc,SAAAD,GAAK,OAAIX,EAAa,YACpCa,iBAAiB,WAAD,4BAAE,WAAOF,GAAP,qBAAAG,EAAA,sEACMd,EAAa,WADnB,OACZe,EADY,OAEZC,EAAoBD,EAAUE,KAAKF,EAAUE,KAAKC,OAAS,GAAGC,OAAOH,kBACrEI,EAAmB,mBAHP,UAKTJ,GAAqBI,EALZ,iCAMKpB,EAAa,gBAAkBgB,GANpC,OAMVK,EANU,OAQdN,EAAUE,KAAOF,EAAUE,KAAKK,OAAOD,EAAOJ,MAC9CD,EAAoBK,EAAOJ,KAAKI,EAAOJ,KAAKC,OAAS,GAAGC,OAAOH,kBATjD,gDAYTD,GAZS,4CAAF,mDAAC,GAejBQ,eAAgB,SAAAd,GAAE,OAAIT,EAAa,iBAAmBS,IACtDe,gBAAiB,SAAAb,GAAK,OAAIX,EAAa,uBAAyBW,IAChEc,mBAAoB,SAAAd,GAAK,OAAIX,EAAa,kBAC1C0B,uBAAuB,WAAD,4BAAE,WAAOf,GAAP,mDAAAG,EAAA,6DAElBa,EAAe,IACNV,KAAO,GAHE,SAKHjB,EAAa,WALV,OAKlBqB,EALkB,qBAMFA,EAAOJ,MANL,IAMtB,2BAAiC,CAAxBW,EAAwB,QAC3BC,EAAUD,EAAO,QADU,cAEbC,GAFa,IAE/B,2BAASC,EAAkB,QACzBH,EAAaV,KAAOU,EAAaV,KAAKK,OAAOQ,EAAMH,cAHtB,gCANX,8BAalBX,EAAoBK,EAAOJ,KAAKI,EAAOJ,KAAKC,OAAS,GAAGC,OAAOH,kBAC/DI,EAAmB,mBAdD,UAefJ,GAAqBI,EAfN,kCAgBDpB,EAAa,gBAAkBgB,GAhB9B,QAgBhBK,EAhBgB,qBAiBAA,EAAOJ,MAjBP,IAiBpB,2BAAiC,CAAxBW,EAAwB,QAC3BC,EAAUD,EAAO,QADU,cAEbC,GAFa,IAE/B,2BAASC,EAAkB,QACzBH,EAAaV,KAAOU,EAAaV,KAAKK,OAAOQ,EAAMH,cAHtB,gCAjBb,8BAuBpBX,EAAoBK,EAAOJ,KAAKI,EAAOJ,KAAKC,OAAS,GAAGC,OAAOH,kBAvB3C,gDA0BfW,GA1Be,4CAAF,mDAAC,GA6BvBI,SAAU,SAAApB,GAAK,OAAIX,EAAa,YAG5BgC,EACC,SAAA/B,GAAG,OAAIb,EACTc,IAAID,GACJgC,IAAI,gBAAiBrC,GACrBO,KAAKN,IAGJqC,EAAU,CACdC,QAAS,SAAAlC,GAAG,OAAI+B,EAAe,2CAKlB,KACbzB,WACAF,KACA6B,a,oCC9GqC,eAAnCE,mHAAYC,mBACdC,EAAOC,QAAU,CACf9C,SAAU,8CACV+C,cAAe,iBACf7C,OAAQ,iBACR8C,SAAS,EACTC,cAAe,mCAGjBJ,EAAOC,QAAU,CACf9C,SAAU,8CACVgD,SAAS,EACTC,cAAe,kCACf/C,OAAQ,wBACRC,OACE,kb,4MCVA+C,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CACXC,MAAO,MAJQ,E,gEAQjBC,KAAKvC,a,iKAIawC,IAAMzC,SAASC,SAC/BuC,KAAKH,MAAMK,MAAMC,OAAOzC,I,OADtBqC,E,OAGJC,KAAKI,SAAS,CACVL,MAAOA,EAAM7B,O,qIAIjB,IAAI6B,EAAQC,KAAKF,MAAMC,MAGvB,OAAKC,KAAKF,MAAMC,MAcd,yBAAKM,UAAU,kBAAkBC,MAAO,CAAC,SAAW,SAClD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,GAAG,MACN,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,uBAAGF,UAAU,mBADf,QAC0C,IACxC,gCACG,IAAMN,EAAM3B,OAAOoC,YAGxB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,YAAU,EAACC,SAAO,EAACC,OAAK,GAC7B,+BACE,wBAAIC,IAAKb,EAAMc,kBACb,wCACA,4BACE,gCAASd,EAAMc,oBAInB,wBAAID,IAAKb,EAAM3B,OAAOH,mBACpB,iDACA,4BACE,gCAAS8B,EAAM3B,OAAOH,qBAI1B,wBAAI2C,IAAKb,EAAM3B,OAAOoC,WACpB,sCACA,4BACE,gCAAST,EAAM3B,OAAOoC,aAI1B,wBAAII,IAAKb,EAAM3B,OAAO0C,mBACpB,iDACA,4BACE,gCAASf,EAAM3B,OAAO0C,qBAI1B,wBAAIF,IAAKb,EAAM3B,OAAO2C,WACpB,yCACA,4BACE,gCAAShB,EAAM3B,OAAO2C,mBAUtC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKR,GAAG,MACN,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,gCACE,uBAAGF,UAAU,kBAAqB,KADpC,gBACuD,MAGzD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOI,YAAU,EAACE,OAAK,GACrB,+BACEZ,EAAMjB,QAAQ,GAAGV,OAAO4C,gBAAgBC,KAAI,SAAAC,GAC3C,OACC,wBAAIN,IAAKM,GACT,4BACA,kBAAC,OAAD,CAAMC,GAAE,wBAAmBD,IAAmBA,eAjF5D,kBAAC,IAAD,CAAKZ,MAAO,CAAEc,UAAW,WACvB,kBAAC,IAAD,CAAKC,GAAG,KAAKC,GAAI,CAAEC,KAAM,EAAGC,OAAQ,IAClC,kBAAC,IAAD,CACEC,MAAM,UACNnB,MAAO,CAAEoB,MAAO,OAAQC,OAAQ,gB,GA9B1BC,aA8HLhC","file":"static/js/12.78751c07.chunk.js","sourcesContent":["import superagentPromise from \"superagent-promise\";\r\nimport _superagent from \"superagent\";\r\nimport config from \"./config/config\";\r\nimport { element } from \"prop-types\";\r\nconst superagent = superagentPromise(_superagent, global.Promise);\r\n\r\nconst ROOT_URL = config.ROOT_URL;\r\nconst ES_URL = config.ES_URL;\r\nconst APIKEY = config.APIKEY;\r\n\r\n\r\nconst responseBody = res => {\r\n  return res.body;\r\n};\r\n\r\nconst requests = {\r\n  del: url => superagent.del(`${ROOT_URL}${url}`).then(responseBody),\r\n  get: url => superagent.get(`${ROOT_URL}${url}`).then(responseBody),\r\n  put: (url, body) =>\r\n    superagent.put(`${ROOT_URL}${url}`, body).then(responseBody),\r\n  post: (url, body) =>\r\n    superagent\r\n      .post(`${ROOT_URL}${url}`, body)\r\n      .set(\"authorization\", sessionStorage.getItem(\"authorization\"))\r\n      .then(responseBody)\r\n};\r\n\r\n\r\n// const requestsIP = {\r\n//   get: url => superagent.get(`${url}`).then(responseBody),\r\n// };\r\n\r\nconst requestES = {\r\n  get: url => superagent.get(`${ES_URL}${url}`).then(responseBody)\r\n\r\n};\r\nconst ES = {\r\n  getAllDocs: () => requestES.get(\"/_stats\"),\r\n}\r\n\r\nconst Sawtooth = {\r\n  getBlock: id => requests.get(\"/blocks/\" + id),\r\n  getBlocks: limit => requests.get(\"/blocks?limit=\" + limit),\r\n  getAllBlocks: limit => requests.get(\"/blocks\"),\r\n  getAllBlocksReal: async (limit) => {\r\n    let allBlocks = await requests.get(\"/blocks\")\r\n    let previous_block_id = allBlocks.data[allBlocks.data.length - 1].header.previous_block_id\r\n    let genesis_block_id = \"0000000000000000\"\r\n\r\n    while (previous_block_id != genesis_block_id) {\r\n      let blocks = await requests.get(\"/blocks?head=\" + previous_block_id)\r\n      \r\n      allBlocks.data = allBlocks.data.concat(blocks.data)\r\n      previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    }\r\n   \r\n    return allBlocks\r\n  },\r\n\r\n  getTransaction: id => requests.get(\"/transactions/\" + id),\r\n  getTransactions: limit => requests.get(\"/transactions?limit=\" + limit),\r\n  getAllTransactions: limit => requests.get(\"/transactions\"),\r\n  getAllTransactionsReal: async (limit) => {\r\n\r\n    let transactions = {}\r\n    transactions.data = []\r\n\r\n    let blocks = await requests.get(\"/blocks\")\r\n    for (let element of blocks.data) {\r\n      let batches = element['batches']\r\n      for (let batch of batches) {\r\n        transactions.data = transactions.data.concat(batch.transactions)\r\n      }\r\n    }\r\n    \r\n    let previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    let genesis_block_id = \"0000000000000000\"\r\n    while (previous_block_id != genesis_block_id) {\r\n      let blocks = await requests.get(\"/blocks?head=\" + previous_block_id)\r\n      for (let element of blocks.data) {\r\n        let batches = element['batches']\r\n        for (let batch of batches) {\r\n          transactions.data = transactions.data.concat(batch.transactions)\r\n        }\r\n      }\r\n      previous_block_id = blocks.data[blocks.data.length - 1].header.previous_block_id\r\n    }\r\n   \r\n    return transactions\r\n  },\r\n\r\n  getPeers: limit => requests.get(\"/peers\")\r\n};\r\n\r\nconst requestApp = {\r\n  get: url => superagent\r\n    .get(url)\r\n    .set(\"Authorization\", APIKEY)\r\n    .then(responseBody)\r\n}\r\n\r\nconst AppInfo = {\r\n  getInfo: url => requestApp.get(\"https://v-chain.vn/appservice/v1/apps\")\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  Sawtooth,\r\n  ES,\r\n  AppInfo\r\n};\r\n","if (process.env.REACT_APP_NODE_ENV === \"production\") {\r\n  module.exports = {\r\n    ROOT_URL: \"http://localhost:2398/http://localhost:8008\",\r\n    SAWTOOTH_NODE: \"localhost:4004\",\r\n    ES_URL: \"localhost:9200\",\r\n    devMode: true,\r\n    websocket_url: \"ws:localhost:8008/subscriptions\",\r\n  };\r\n} else {\r\n  module.exports = {\r\n    ROOT_URL: \"http://localhost:2398/http://localhost:8008\",\r\n    devMode: false,\r\n    websocket_url: \"ws:localhost:8008/subscriptions\",\r\n    ES_URL: \"http://localhost:9200\",\r\n    APIKEY:\r\n      \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6ImRpbnRlIiwiZW1haWwiOiJkaW50ZUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImFjdGl2ZSI6dHJ1ZSwiYmFsYW5jZSI6MCwicmVmZXJyYWxfY29kZSI6bnVsbCwicGxhbiI6eyJwbGFuX3R5cGUiOiJwcm8iLCJkdWVfZGF0ZSI6MH0sIm5hbWUiOiJkaW50ZSIsInBob25lIjoiMDEyMzQ1Njc4OSIsImJpcnRoZGF5IjoiMDEvMDEvMTk3MCIsInVzZXJfaWQiOiI1ZjY4N2YwYjAzZTcyOWE0OWRhYjE5NTciLCJleHAiOjE2MzQ2MzUyNTZ9.68eFaiIGZJ3eBt9UvI7mn0is9jtjwJ4kXyvJL5qsJxQ\",\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Card, CardBody, CardHeader, Col, Row, Table ,Spinner} from \"reactstrap\";\r\nimport agent from \"../../agent\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Block extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      block: null\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getBlock();\r\n  }\r\n\r\n  async getBlock() {\r\n    let block = await agent.Sawtooth.getBlock(\r\n      this.props.match.params.id\r\n    );\r\n    this.setState({\r\n        block: block.data\r\n    });\r\n  }\r\n  render() {\r\n    let block = this.state.block;\r\n\r\n    // const transactionDetails = transaction ? Object.entries(transaction) : [['id', (<span><i className=\"text-muted icon-ban\"></i> Not found</span>)]]\r\n    if (!this.state.block) {\r\n      return (\r\n        <Row style={{ textAlign: \"center\" }}>\r\n          <Col sm=\"12\" md={{ size: 6, offset: 3 }}>\r\n            <Spinner\r\n              color=\"primary\"\r\n              style={{ width: \"50px\", height: \"50px\" }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"animated fadeIn\" style={{\"fontSize\":\"14px\"}}>\r\n        <Row>\r\n          <Col lg=\"12\">\r\n            <Card>\r\n              <CardHeader>\r\n                <i className=\"icon-info pr-1\"></i>Block{\" \"}\r\n                <strong>\r\n                  {\"#\" + block.header.block_num}\r\n                </strong>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Table responsive striped hover>\r\n                  <tbody>\r\n                    <tr key={block.header_signature}>\r\n                      <td>Block ID</td>\r\n                      <td>\r\n                        <strong>{block.header_signature}</strong>\r\n                      </td>\r\n                    </tr>\r\n                    \r\n                    <tr key={block.header.previous_block_id}>\r\n                      <td>Previous Block ID</td>\r\n                      <td>\r\n                        <strong>{block.header.previous_block_id}</strong>\r\n                      </td>\r\n                    </tr>\r\n\r\n                    <tr key={block.header.block_num}>\r\n                      <td>Height</td>\r\n                      <td>\r\n                        <strong>{block.header.block_num}</strong>\r\n                      </td>\r\n                    </tr>\r\n                   \r\n                    <tr key={block.header.signer_public_key}>\r\n                      <td>Signer Public Key</td>\r\n                      <td>\r\n                        <strong>{block.header.signer_public_key}</strong>\r\n                      </td>\r\n                    </tr>\r\n\r\n                    <tr key={block.header.consensus}>\r\n                      <td>Consensus</td>\r\n                      <td>\r\n                        <strong>{block.header.consensus}</strong>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </Table>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col lg=\"12\">\r\n            <Card>\r\n              <CardHeader>\r\n                <strong>\r\n                  <i className=\"fa fa-sign-in\"></i>{\"  \"}Transactions:{\" \"}\r\n                </strong>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Table responsive hover>\r\n                  <tbody>\r\n                   {block.batches[0].header.transaction_ids.map(transaction_id=>{\r\n                     return(\r\n                      <tr key={transaction_id}>\r\n                      <td>\r\n                      <Link to={`/transactions/${transaction_id}`}>{transaction_id}</Link>\r\n                      </td>\r\n                    </tr>\r\n                     )\r\n                   })}\r\n                  </tbody>\r\n                </Table>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n    \r\n        </Row>\r\n\r\n      \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Block;\r\n"],"sourceRoot":""}